@model IEnumerable<proyecto_termotasajero.Models.ParametrosOperacionCapacitacionAgua>

@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container-fluid py-3 py-md-4">
    <div class="row mb-3 mb-md-4">
        <div class="col-12">
            <div class="d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center gap-2">
                <h1 class="h2 text-black fw-bold mb-2 mb-md-0">Parámetros Operación Capacitación Agua</h1>
                <a asp-action="Registrar" class="btn btn-primary">
                    <i class="fas fa-plus-circle me-2"></i>Registrar
                </a>
            </div>
        </div>
    </div>

    <div class="card shadow-sm">
        <div class="card-body p-2 p-md-3">
            <div id="paginado-listado">
                <div class="table-responsive">
                    <table class="table table-hover table-striped mb-0">
                        <thead class="table-light">
                            <tr id="header-row">
                                <!-- Los headers se llenan por JS -->
                            </tr>
                        </thead>
                        <tbody id="body-rows">
                            <!-- Las filas se llenan por JS -->
                        </tbody>
                    </table>
                </div>
                <div class="d-flex flex-column flex-sm-row justify-content-between align-items-center gap-2 mt-3 mt-md-4">
                    <button class="btn btn-outline-primary" id="prevSectionBtn" style="display:none;">
                        <i class="fas fa-chevron-left me-2"></i>Anterior sección
                    </button>
                    <button class="btn btn-primary" id="nextSectionBtn">
                        Siguiente sección<i class="fas fa-chevron-right ms-2"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
<script>
    // Obtén los datos del modelo en JS
    const data = [
        @foreach (var item in Model) {
            @: {
            @: ID: @(item.ID),
            @: Inicio: '@item.Inicio',
            @: Finalizacion: '@item.Finalizacion',
            @: CorreoElectronico: '@item.CorreoElectronico',
            @: Nombre: '@item.Nombre',
            @: OperadorTurno: '@item.OperadorTurno',
            @: VoltajeBarraBPW_kV: '@item.VoltajeBarraBPW_kV',
            @: Corriente_A: '@item.Corriente_A',
            @: BBT_A_Estado: '@item.BBT_A_Estado',
            @: TempAceiteReductor_A: '@item.TempAceiteReductor_A',
            @: PresAceitePrincipal_A_kgcm2: '@item.PresAceitePrincipal_A_kgcm2',
            @: PresNormalLubricacion_A_kgcm2: '@item.PresNormalLubricacion_A_kgcm2',
            @: PresAguaEnfriamiento_A_kgcm2: '@item.PresAguaEnfriamiento_A_kgcm2',
            @: TempDevanadosFaseR_A: '@item.TempDevanadosFaseR_A',
            @: TempDevanadosFaseS_A: '@item.TempDevanadosFaseS_A',
            @: TempDevanadosFaseT_A: '@item.TempDevanadosFaseT_A',
            @: BBT_B_Estado: '@item.BBT_B_Estado',
            @: TempAceiteReductor_B: '@item.TempAceiteReductor_B',
            @: PresAceitePrincipal_B_kgcm2: '@item.PresAceitePrincipal_B_kgcm2',
            @: PresNormalLubricacion_B_kgcm2: '@item.PresNormalLubricacion_B_kgcm2',
            @: PresAguaEnfriamiento_B_kgcm2: '@item.PresAguaEnfriamiento_B_kgcm2',
            @: TempRodamientoLadoLibre_B: '@item.TempRodamientoLadoLibre_B',
            @: TempDevanadosFaseR_B: '@item.TempDevanadosFaseR_B',
            @: TempDevanadosFaseS_B: '@item.TempDevanadosFaseS_B',
            @: TempDevanadosFaseT_B: '@item.TempDevanadosFaseT_B',
            @: TempRodamientoLadoAcople_B: '@item.TempRodamientoLadoAcople_B',
            @: BBT_C_Estado: '@item.BBT_C_Estado',
            @: TempAceiteReductor_C: '@item.TempAceiteReductor_C',
            @: PresAceitePrincipal_C_kgcm2: '@item.PresAceitePrincipal_C_kgcm2',
            @: PresNormalLubricacion_C_kgcm2: '@item.PresNormalLubricacion_C_kgcm2',
            @: PresAguaEnfriamiento_C_kgcm2: '@item.PresAguaEnfriamiento_C_kgcm2',
            @: TempDevanadosFaseR_C: '@item.TempDevanadosFaseR_C',
            @: TempDevanadosFaseS_C: '@item.TempDevanadosFaseS_C',
            @: TempDevanadosFaseT_C: '@item.TempDevanadosFaseT_C',
            @: BbaB_CircuitoCerrado: '@item.BbaB_CircuitoCerrado',
            @: BbaA_CircuitoCerrado: '@item.BbaA_CircuitoCerrado',
            @: PresDescargaCabezal_kgcm2: '@item.PresDescargaCabezal_kgcm2'
            @: },
        }
    ];
    // Nombres de columnas en orden
    const columns = [
        'ID','Inicio','Finalizacion','CorreoElectronico','Nombre','OperadorTurno','VoltajeBarraBPW_kV','Corriente_A',
        'BBT_A_Estado','TempAceiteReductor_A','PresAceitePrincipal_A_kgcm2','PresNormalLubricacion_A_kgcm2','PresAguaEnfriamiento_A_kgcm2',
        'TempDevanadosFaseR_A','TempDevanadosFaseS_A','TempDevanadosFaseT_A','BBT_B_Estado','TempAceiteReductor_B',
        'PresAceitePrincipal_B_kgcm2','PresNormalLubricacion_B_kgcm2','PresAguaEnfriamiento_B_kgcm2','TempRodamientoLadoLibre_B',
        'TempDevanadosFaseR_B','TempDevanadosFaseS_B','TempDevanadosFaseT_B','TempRodamientoLadoAcople_B','BBT_C_Estado',
        'TempAceiteReductor_C','PresAceitePrincipal_C_kgcm2','PresNormalLubricacion_C_kgcm2','PresAguaEnfriamiento_C_kgcm2',
        'TempDevanadosFaseR_C','TempDevanadosFaseS_C','TempDevanadosFaseT_C','BbaB_CircuitoCerrado','BbaA_CircuitoCerrado','PresDescargaCabezal_kgcm2'
    ];
    // Nombres legibles para los headers
    const columnHeaders = [
        'ID','Inicio','Finalización','Correo Electrónico','Nombre','Operador Turno','Voltaje Barra BPW (kV)','Corriente (A)',
        'BBT A Estado','Temp. Aceite Reductor A','Pres. Aceite Principal A (kg/cm2)','Pres. Normal Lubricación A (kg/cm2)','Pres. Agua Enfriamiento A (kg/cm2)',
        'Temp. Devanados Fase R A','Temp. Devanados Fase S A','Temp. Devanados Fase T A','BBT B Estado','Temp. Aceite Reductor B',
        'Pres. Aceite Principal B (kg/cm2)','Pres. Normal Lubricación B (kg/cm2)','Pres. Agua Enfriamiento B (kg/cm2)','Temp. Rodamiento Lado Libre B',
        'Temp. Devanados Fase R B','Temp. Devanados Fase S B','Temp. Devanados Fase T B','Temp. Rodamiento Lado Acople B','BBT C Estado',
        'Temp. Aceite Reductor C','Pres. Aceite Principal C (kg/cm2)','Pres. Normal Lubricación C (kg/cm2)','Pres. Agua Enfriamiento C (kg/cm2)',
        'Temp. Devanados Fase R C','Temp. Devanados Fase S C','Temp. Devanados Fase T C','BbaB Circuito Cerrado','BbaA Circuito Cerrado','Pres. Descarga Cabezal (kg/cm2)'
    ];
    // Paginación de columnas
    const pageSize = 8;
    let currentSection = 0;
    function renderTable() {
        // Renderiza los headers y las filas según la sección actual
        const start = currentSection * pageSize;
        const end = Math.min(start + pageSize, columns.length);
        const visibleColumns = columns.slice(start, end);
        const visibleHeaders = columnHeaders.slice(start, end);
        // Render headers
        const headerRow = document.getElementById('header-row');
        headerRow.innerHTML = '';
        visibleHeaders.forEach(h => {
            const th = document.createElement('th');
            th.textContent = h;
            headerRow.appendChild(th);
        });
        // Render rows
        const bodyRows = document.getElementById('body-rows');
        bodyRows.innerHTML = '';
        data.forEach(row => {
            const tr = document.createElement('tr');
            visibleColumns.forEach(col => {
                const td = document.createElement('td');
                td.textContent = row[col];
                tr.appendChild(td);
            });
            bodyRows.appendChild(tr);
        });
        // Botones
        document.getElementById('prevSectionBtn').style.display = currentSection > 0 ? '' : 'none';
        document.getElementById('nextSectionBtn').style.display = end < columns.length ? '' : 'none';
    }
    document.getElementById('prevSectionBtn').onclick = function () {
        if (currentSection > 0) {
            currentSection--;
            renderTable();
        }
    };
    document.getElementById('nextSectionBtn').onclick = function () {
        if ((currentSection + 1) * pageSize < columns.length) {
            currentSection++;
            renderTable();
        }
    };
    renderTable();
</script>
}
