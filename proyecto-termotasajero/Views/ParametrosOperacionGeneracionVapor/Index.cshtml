@model IEnumerable<proyecto_termotasajero.Models.ParametrosOperacionGeneracionVapor>

@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container-fluid py-3 py-md-4">
    <div class="row mb-3 mb-md-4">
        <div class="col-12">
            <div class="d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center gap-2">
                <h1 class="h2 text-black fw-bold mb-2 mb-md-0">Parámetros Operación Generación Vapor</h1>
                <a asp-action="Registrar" class="btn btn-primary">
                    <i class="fas fa-plus-circle me-2"></i>Registrar
                </a>
            </div>
        </div>
    </div>

    <div class="card shadow-sm">
        <div class="card-body p-2 p-md-3">
            <div id="paginado-listado">
                <div class="table-responsive">
                    <table class="table table-hover table-striped mb-0">
                        <thead class="table-light">
                            <tr id="header-row">
                                <!-- Los headers se llenan por JS -->
                            </tr>
                        </thead>
                        <tbody id="body-rows">
                            <!-- Las filas se llenan por JS -->
                        </tbody>
                    </table>
                </div>
                <div class="d-flex flex-column flex-sm-row justify-content-between align-items-center gap-2 mt-3 mt-md-4">
                    <button class="btn btn-outline-primary" id="prevSectionBtn" style="display:none;">
                        <i class="fas fa-chevron-left me-2"></i>Anterior sección
                    </button>
                    <button class="btn btn-primary" id="nextSectionBtn">
                        Siguiente sección<i class="fas fa-chevron-right ms-2"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        // Obtén los datos del modelo en JS
        const data = [
        @foreach (var item in Model)
        {
            @:{
            @:ID: @(item.ID),
            @:FechaHoraInicio: '@item.FechaHoraInicio',
            @:FechaHoraFinalizacion: '@item.FechaHoraFinalizacion',
            @:CorreoElectronico: '@item.CorreoElectronico',
            @:NombreOperador: '@item.NombreOperador',
            @:OperadorTurno: '@item.OperadorTurno',
            @:AirePurgaA: '@item.AirePurgaA',
            @:AirePurgaB: '@item.AirePurgaB',
            @:CorrienteAirePurgaA: @(item.CorrienteAirePurgaA),
            @:CorrienteAirePurgaB: @(item.CorrienteAirePurgaB),
            @:VTIA_PresionAceiteEntrada: @(item.VTIA_PresionAceiteEntrada),
            @:VTIA_PresionAceiteSalida: @(item.VTIA_PresionAceiteSalida),
            @:VTIA_TempAceiteEntrada: @(item.VTIA_TempAceiteEntrada),
            @:VTIA_TempAceiteSalida: @(item.VTIA_TempAceiteSalida),
            @:VTIB_PresionAceiteEntrada: @(item.VTIB_PresionAceiteEntrada),
            @:VTIB_PresionAceiteSalida: @(item.VTIB_PresionAceiteSalida),
            @:VTIB_TempAceiteEntrada: @(item.VTIB_TempAceiteEntrada),
            @:VTIB_TempAceiteSalida: @(item.VTIB_TempAceiteSalida),
            @:PresionFluidizadorA: @(item.PresionFluidizadorA),
            @:PresionFluidizadorB: @(item.PresionFluidizadorB),
            @:SopladorFluidizadorA: '@item.SopladorFluidizadorA',
            @:SopladorFluidizadorB: '@item.SopladorFluidizadorB',
            @:SopladorTransporteA: '@item.SopladorTransporteA',
            @:SopladorTransporteB: '@item.SopladorTransporteB',
            @:VTFB_PresionEntrada: @(item.VTFB_PresionEntrada),
            @:VTFB_PresionSalida: @(item.VTFB_PresionSalida),
            @:VTFB_TempEntrada: @(item.VTFB_TempEntrada),
            @:VTFB_TempSalida: @(item.VTFB_TempSalida),
            @:VTFA_PresionEntrada: @(item.VTFA_PresionEntrada),
            @:VTFA_PresionSalida: @(item.VTFA_PresionSalida),
            @:VTFA_TempEntrada: @(item.VTFA_TempEntrada),
            @:VTFA_TempSalida: @(item.VTFA_TempSalida),
            @:BandaAC1: '@item.BandaAC1',
            @:Scrapper: '@item.Scrapper',
            @:PresionAguaLadoA: @(item.PresionAguaLadoA),
            @:PresionAguaLadoB: @(item.PresionAguaLadoB),
            @:TempAceiteMolinoD: @(item.TempAceiteMolinoD),
            @:TempAceiteMolinoC: @(item.TempAceiteMolinoC),
            @:TempAceiteMolinoB: @(item.TempAceiteMolinoB),
            @:TempAceiteMolinoA: @(item.TempAceiteMolinoA),
            @:ClasificadorMolinosA: @(item.ClasificadorMolinosA),
            @:ClasificadorMolinosB: @(item.ClasificadorMolinosB),
            @:ClasificadorMolinosC: @(item.ClasificadorMolinosC),
            @:ClasificadorMolinosD: @(item.ClasificadorMolinosD),
            @:LjungstromB: '@item.LjungstromB',
            @:LjungstromA: '@item.LjungstromA',
            @:PresionTk: @(item.PresionTk),
            @:Apertura: '@item.Apertura',
            @:LjungstromPrecionGuia_A: '@item.LjungstromPrecionGuia_A',
            @:LjungstromPrecionGuia_B: '@item.LjungstromPrecionGuia_B',
            @:Observaciones: '@item.Observaciones',
            @:VibradorA: '@item.VibradorA',
            @:VibradorB: '@item.VibradorB',
            @:VibradorC: '@item.VibradorC',
            @:ZarandaA: '@item.ZarandaA',
            @:TrituradorA: '@item.TrituradorA',
            @:ZarandaB: '@item.ZarandaB',
            @:TrituradorB: '@item.TrituradorB',
            @:FluidizadorB: '@item.FluidizadorB',
            @:FluidizadorA: '@item.FluidizadorA',
            @:},
        }
            ];
        // Nombres de columnas en orden
        const columns = [
            'ID', 'FechaHoraInicio', 'FechaHoraFinalizacion', 'CorreoElectronico', 'NombreOperador', 'OperadorTurno', 'AirePurgaA', 'AirePurgaB', 'CorrienteAirePurgaA', 'CorrienteAirePurgaB', 'VTIA_PresionAceiteEntrada', 'VTIA_PresionAceiteSalida', 'VTIA_TempAceiteEntrada', 'VTIA_TempAceiteSalida', 'VTIB_PresionAceiteEntrada', 'VTIB_PresionAceiteSalida', 'VTIB_TempAceiteEntrada', 'VTIB_TempAceiteSalida', 'PresionFluidizadorA', 'PresionFluidizadorB', 'SopladorFluidizadorA', 'SopladorFluidizadorB', 'SopladorTransporteA', 'SopladorTransporteB', 'VTFB_PresionEntrada', 'VTFB_PresionSalida', 'VTFB_TempEntrada', 'VTFB_TempSalida', 'VTFA_PresionEntrada', 'VTFA_PresionSalida', 'VTFA_TempEntrada', 'VTFA_TempSalida', 'BandaAC1', 'Scrapper', 'PresionAguaLadoA', 'PresionAguaLadoB', 'TempAceiteMolinoD', 'TempAceiteMolinoC', 'TempAceiteMolinoB', 'TempAceiteMolinoA', 'ClasificadorMolinosA', 'ClasificadorMolinosB', 'ClasificadorMolinosC', 'ClasificadorMolinosD', 'LjungstromB', 'LjungstromA', 'PresionTk', 'Apertura', 'LjungstromPrecionGuia_A', 'LjungstromPrecionGuia_B', 'Observaciones', 'VibradorA', 'VibradorB', 'VibradorC', 'ZarandaA', 'TrituradorA', 'ZarandaB', 'TrituradorB', 'FluidizadorB', 'FluidizadorA'
        ];
        // Nombres legibles para los headers (puedes personalizar estos nombres)
        const columnHeaders = [
            'ID', 'Inicio', 'Finalizacion', 'Correo Electronico', 'Nombre', 'Operador de Turno', 'Aire Purga A', 'Aire Purga B', 'Corriente[Amp] Aire de Purga A', 'Corriente[Amp] Aire de Purga B', 'VTI A Presion Aceite de Entrada', 'VTI A Presion Aceite de Salida', 'VTI A Temp Aceite de Entrada', 'VTI A Temp Aceite de Salida', 'VTI B Presion Aceite de Entrada', 'VTI B Presion Aceite de Salida', 'VTI B Temp Aceite de Entrada', 'VTI B Temp Aceite de Salida', 'Presion Fluidizador A', 'Presion Fluidizador B', 'Soplador Fluidizador A', 'Soplador Fluidizador B', 'Soplador Transporte A', 'Soplador Transporte B', 'VTF B Presion Aceite de Entrada', 'VTF B Presion Aceite de Salida', 'VTF B Temp Aceite de Entrada', 'VTF B Temp Aceite de Salida', 'VTF A Presion Aceite de Entrada', 'VTF A Presion Aceite de Salida', 'VTF A Temp Aceite de Entrada', 'VTF A Temp Aceite de Salida', 'Banda AC-1', 'Scrapper', 'Presion Agua Lado A [kg/cm2]', 'Presion Agua Lado B [kg/cm2]', 'Temp Aceite Molino D [°C]', 'Temp Aceite Molino C [°C]', 'Temp Aceite Molino B [°C]', 'Temp Aceite Molino A [°C]', 'Clasificador Molino A', 'Clasificador Molino B', 'Clasificador Molino C', 'Clasificador Molino D', 'Ljungstrom B', 'Ljungstrom A', 'Presion Tk', 'Apertura', 'Ljungstrom A', 'Ljungstrom B', 'Observaciones', 'Vibrador A', 'Vibrador B', 'Vibrador C', 'Zaranda A', 'Triturador A', 'Zaranda B', 'Triturador B', 'Fluidizador B', 'Fluidizador A'
        ];
        // Paginación de columnas
        const pageSize = 8;
        let currentSection = 0;
        function renderTable() {
            // Renderiza los headers y las filas según la sección actual
            const start = currentSection * pageSize;
            const end = Math.min(start + pageSize, columns.length);
            const visibleColumns = columns.slice(start, end);
            const visibleHeaders = columnHeaders.slice(start, end);
            // Render headers
            const headerRow = document.getElementById('header-row');
            headerRow.innerHTML = '';
            visibleHeaders.forEach(h => {
                const th = document.createElement('th');
                th.textContent = h;
                headerRow.appendChild(th);
            });
            // Render rows
            const bodyRows = document.getElementById('body-rows');
            bodyRows.innerHTML = '';
            data.forEach(row => {
                const tr = document.createElement('tr');
                visibleColumns.forEach(col => {
                    const td = document.createElement('td');
                    td.textContent = row[col];
                    tr.appendChild(td);
                });
                bodyRows.appendChild(tr);
            });
            // Botones
            document.getElementById('prevSectionBtn').style.display = currentSection > 0 ? '' : 'none';
            document.getElementById('nextSectionBtn').style.display = end < columns.length ? '' : 'none';
        }
        document.getElementById('prevSectionBtn').onclick = function () {
            if (currentSection > 0) {
                currentSection--;
                renderTable();
            }
        };
        document.getElementById('nextSectionBtn').onclick = function () {
            if ((currentSection + 1) * pageSize < columns.length) {
                currentSection++;
                renderTable();
            }
        };
        renderTable();
    </script>
}
