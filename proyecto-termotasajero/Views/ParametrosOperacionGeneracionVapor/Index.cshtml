@model IEnumerable<proyecto_termotasajero.Models.ParametrosOperacionGeneracionVapor>

@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h1>Parámetros Operación Generación Vapor</h1>

<p>
    <a asp-action="Registrar">Registrar</a>
</p>

<div id="paginado-listado">
    <div class="table-responsive">
        <table class="table">
            <thead>
                <tr id="header-row">
                    <!-- Los headers se llenan por JS -->
                </tr>
            </thead>
            <tbody id="body-rows">
                <!-- Las filas se llenan por JS -->
            </tbody>
        </table>
    </div>
    <div class="d-flex justify-content-between mt-3">
        <button class="btn btn-secondary" id="prevSectionBtn" style="display:none;">Anterior sección</button>
        <button class="btn btn-primary" id="nextSectionBtn">Siguiente sección</button>
    </div>
</div>

@section Scripts {
    <script>
        // Obtén los datos del modelo en JS
        const data = [
        @foreach (var item in Model)
        {
            @:{
            @:ID: @(item.ID),
            @:FechaHoraInicio: '@item.FechaHoraInicio',
            @:FechaHoraFinalizacion: '@item.FechaHoraFinalizacion',
            @:CorreoElectronico: '@item.CorreoElectronico',
            @:NombreOperador: '@item.NombreOperador',
            @:OperadorTurno: '@item.OperadorTurno',
            @:AirePurgaA: '@item.AirePurgaA',
            @:AirePurgaB: '@item.AirePurgaB',
            @:CorrienteAirePurgaA: @(item.CorrienteAirePurgaA),
            @:CorrienteAirePurgaB: @(item.CorrienteAirePurgaB),
            @:VTIA_PresionAceiteEntrada: @(item.VTIA_PresionAceiteEntrada),
            @:VTIA_PresionAceiteSalida: @(item.VTIA_PresionAceiteSalida),
            @:VTIA_TempAceiteEntrada: @(item.VTIA_TempAceiteEntrada),
            @:VTIA_TempAceiteSalida: @(item.VTIA_TempAceiteSalida),
            @:VTIB_PresionAceiteEntrada: @(item.VTIB_PresionAceiteEntrada),
            @:VTIB_PresionAceiteSalida: @(item.VTIB_PresionAceiteSalida),
            @:VTIB_TempAceiteEntrada: @(item.VTIB_TempAceiteEntrada),
            @:VTIB_TempAceiteSalida: @(item.VTIB_TempAceiteSalida),
            @:PresionFluidizadorA: @(item.PresionFluidizadorA),
            @:PresionFluidizadorB: @(item.PresionFluidizadorB),
            @:SopladorFluidizadorA: '@item.SopladorFluidizadorA',
            @:SopladorFluidizadorB: '@item.SopladorFluidizadorB',
            @:SopladorTransporteA: '@item.SopladorTransporteA',
            @:SopladorTransporteB: '@item.SopladorTransporteB',
            @:VTFB_PresionEntrada: @(item.VTFB_PresionEntrada),
            @:VTFB_PresionSalida: @(item.VTFB_PresionSalida),
            @:VTFB_TempEntrada: @(item.VTFB_TempEntrada),
            @:VTFB_TempSalida: @(item.VTFB_TempSalida),
            @:VTFA_PresionEntrada: @(item.VTFA_PresionEntrada),
            @:VTFA_PresionSalida: @(item.VTFA_PresionSalida),
            @:VTFA_TempEntrada: @(item.VTFA_TempEntrada),
            @:VTFA_TempSalida: @(item.VTFA_TempSalida),
            @:BandaAC1: '@item.BandaAC1',
            @:Scrapper: '@item.Scrapper',
            @:PresionAguaLadoA: @(item.PresionAguaLadoA),
            @:PresionAguaLadoB: @(item.PresionAguaLadoB),
            @:TempAceiteMolinoD: @(item.TempAceiteMolinoD),
            @:TempAceiteMolinoC: @(item.TempAceiteMolinoC),
            @:TempAceiteMolinoB: @(item.TempAceiteMolinoB),
            @:TempAceiteMolinoA: @(item.TempAceiteMolinoA),
            @:ClasificadorMolinosB: @(item.ClasificadorMolinosB),
            @:ClasificadorMolinosC: @(item.ClasificadorMolinosC),
            @:ClasificadorMolinosD: @(item.ClasificadorMolinosD),
            @:LjungstromB: '@item.LjungstromB',
            @:LjungstromA: '@item.LjungstromA',
            @:PresionTk: @(item.PresionTk),
            @:Apertura: '@item.Apertura',
            @:LjungstromPrecionGuia_A: '@item.LjungstromPrecionGuia_A',
            @:LjungstromPrecionGuia_B: '@item.LjungstromPrecionGuia_B',
            @:Observaciones: '@item.Observaciones',
            @:VibradorA: '@item.VibradorA',
            @:VibradorB: '@item.VibradorB',
            @:VibradorC: '@item.VibradorC',
            @:ZarandaA: '@item.ZarandaA',
            @:TrituradorA: '@item.TrituradorA',
            @:ZarandaB: '@item.ZarandaB',
            @:TrituradorB: '@item.TrituradorB',
            @:FluidizadorB: '@item.FluidizadorB',
            @:FluidizadorA: '@item.FluidizadorA',
            @:},
        }
            ];
        // Nombres de columnas en orden
        const columns = [
            'ID', 'FechaHoraInicio', 'FechaHoraFinalizacion', 'CorreoElectronico', 'NombreOperador', 'OperadorTurno', 'AirePurgaA', 'AirePurgaB', 'CorrienteAirePurgaA', 'CorrienteAirePurgaB', 'VTIA_PresionAceiteEntrada', 'VTIA_PresionAceiteSalida', 'VTIA_TempAceiteEntrada', 'VTIA_TempAceiteSalida', 'VTIB_PresionAceiteEntrada', 'VTIB_PresionAceiteSalida', 'VTIB_TempAceiteEntrada', 'VTIB_TempAceiteSalida', 'PresionFluidizadorA', 'PresionFluidizadorB', 'SopladorFluidizadorA', 'SopladorFluidizadorB', 'SopladorTransporteA', 'SopladorTransporteB', 'VTFB_PresionEntrada', 'VTFB_PresionSalida', 'VTFB_TempEntrada', 'VTFB_TempSalida', 'VTFA_PresionEntrada', 'VTFA_PresionSalida', 'VTFA_TempEntrada', 'VTFA_TempSalida', 'BandaAC1', 'Scrapper', 'PresionAguaLadoA', 'PresionAguaLadoB', 'TempAceiteMolinoD', 'TempAceiteMolinoC', 'TempAceiteMolinoB', 'TempAceiteMolinoA', 'ClasificadorMolinosB', 'ClasificadorMolinosC', 'ClasificadorMolinosD', 'LjungstromB', 'LjungstromA', 'PresionTk', 'Apertura', 'LjungstromPrecionGuia_A', 'LjungstromPrecionGuia_B', 'Observaciones', 'VibradorA', 'VibradorB', 'VibradorC', 'ZarandaA', 'TrituradorA', 'ZarandaB', 'TrituradorB', 'FluidizadorB', 'FluidizadorA'
        ];
        // Nombres legibles para los headers (puedes personalizar estos nombres)
        const columnHeaders = columns.map(c => c);
        // Paginación de columnas
        const pageSize = 8;
        let currentSection = 0;
        function renderTable() {
            // Renderiza los headers y las filas según la sección actual
            const start = currentSection * pageSize;
            const end = Math.min(start + pageSize, columns.length);
            const visibleColumns = columns.slice(start, end);
            const visibleHeaders = columnHeaders.slice(start, end);
            // Render headers
            const headerRow = document.getElementById('header-row');
            headerRow.innerHTML = '';
            visibleHeaders.forEach(h => {
                const th = document.createElement('th');
                th.textContent = h;
                headerRow.appendChild(th);
            });
            // Render rows
            const bodyRows = document.getElementById('body-rows');
            bodyRows.innerHTML = '';
            data.forEach(row => {
                const tr = document.createElement('tr');
                visibleColumns.forEach(col => {
                    const td = document.createElement('td');
                    td.textContent = row[col];
                    tr.appendChild(td);
                });
                bodyRows.appendChild(tr);
            });
            // Botones
            document.getElementById('prevSectionBtn').style.display = currentSection > 0 ? '' : 'none';
            document.getElementById('nextSectionBtn').style.display = end < columns.length ? '' : 'none';
        }
        document.getElementById('prevSectionBtn').onclick = function () {
            if (currentSection > 0) {
                currentSection--;
                renderTable();
            }
        };
        document.getElementById('nextSectionBtn').onclick = function () {
            if ((currentSection + 1) * pageSize < columns.length) {
                currentSection++;
                renderTable();
            }
        };
        renderTable();
    </script>
}
